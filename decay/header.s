; header.s
; Decay Audio Engine
; By Ryan Sandor Richards

;
; IMPORTANT:
; This file should be included in your source code before any of the other 
; decay files. It sets constants that are used throughout the engine.
;

; DECAY_PAGE Denotes the address of the page where the Decay Audio Engine state
; will be stored IN RAM. You can redefine this, but it must be on a page
; boundary (e.g. $0200, $0300, etc.)
DECAY_PAGE = $0300


;################### APU Registers ############################################

; APU Flags Register
DECAY_APU_FLAGS			= $4015

; Channel Flags
DECAY_FLAG_SQUARE1		= $%00000001
DECAY_FLAG_SQUARE2		= $%00000010
DECAY_FLAG_TRIANGLE		= $%00000100
DECAY_FLAG_NOISE		= $%00001000
DECAY_FLAG_DMC			= $%00010000

; APU Registers
DECAY_APU_SQUARE1_ENV 		= $4000
DECAY_APU_SQUARE1_SWEEP		= $4001
DECAY_APU_SQUARE1_LO 		= $4002
DECAY_APU_SQUARE1_HI 		= $4003

DECAY_APU_SQUARE2_ENV 		= $4004
DECAY_APU_SQUARE2_SWEEP		= $4005
DECAY_APU_SQUARE2_LO 		= $4006
DECAY_APU_SQUARE2_HI 		= $4007

DECAY_APU_TRIANGLE_CTRL 	= $4008
DECAY_APU_TRIANGLE_LO 		= $400A
DECAY_APU_TRIANGLE_HI 		= $400B
	
DECAY_APU_NOISE_CTRL 		= $400C
DECAY_APU_NOISE_PERIOD		= $400E

; TODO Map DMC registers

.enum DecayChannel
	Square1 		= $4002
	Square2 		= $4006
	Triangle 		= $400A
	Noise 			= $400E
.endenum


;################### Master Control Addresses #################################

; Master Beat Clock
DECAY_CLOCK 			= (DECAY_PAGE + $00)
DECAY_CLOCK_ADD			= (DECAY_PAGE + $01)

; Pattern Matrix
DECAY_MATRIX_LO			= (DECAY_PAGE + $05)
DECAY_MATRIX_HI			= (DECAY_PAGE + $06)
DECAY_MATRIX_SIZE		= (DECAY_PAGE + $07)
DECAY_MATRIX_POS		= (DECAY_PAGE + $08)

; Pattern size and current position
DECAY_PATTERN_SIZE		= (DECAY_PAGE + $09)
DECAY_PATTERN_POS		= (DECAY_PAGE + $0A)

DECAY_FLAGS 			= (DECAY_PAGE + $0B)


;################### NES Audio Channels #######################################

DECAY_AUDIO_CHANNEL		= (DECAY_PAGE + $10)

DECAY_SQUARE1_PATTERN_LO	= (DECAY_AUDIO_CHANNEL + $00)
DECAY_SQUARE1_PATTERN_HI	= (DECAY_AUDIO_CHANNEL + $01)
DECAY_SQUARE1_NEXT_POS		= (DECAY_AUDIO_CHANNEL + $02)
DECAY_SQUARE1_INST		= (DECAY_AUDIO_CHANNEL + $03)
DECAY_SQUARE1_FRAME		= (DECAY_AUDIO_CHANNEL + $04)


DECAY_SQUARE2_PATTERN		= (DECAY_PAGE + $18)
DECAY_SQUARE2_NEXT_POS		= (DECAY_PAGE + $19)
DECAY_SQUARE2_ENV		= (DECAY_PAGE + $1A)
DECAY_SQUARE2_INST		= (DECAY_PAGE + $1B)
DECAY_SQUARE2_FRAME		= (DECAY_PAGE + $1C)

DECAY_TRIANGLE_PATTERN		= (DECAY_PAGE + $20)
DECAY_TRIANGLE_NEXT_POS 	= (DECAY_PAGE + $21)
DECAY_TRIANGLE_CTRL		= (DECAY_PAGE + $22)
DECAY_TRIANGLE_INST		= (DECAY_PAGE + $23)
DECAY_TRIANGLE_FRAME		= (DECAY_PAGE + $24)

DECAY_NOISE_PATTERN		= (DECAY_PAGE + $28)
DECAY_NOISE_NEXT_POS		= (DECAY_PAGE + $29)
DECAY_NOISE_CTRL		= (DECAY_PAGE + $2A)
DECAY_NOISE_INST		= (DECAY_PAGE + $2B)
DECAY_NOISE_FRAME		= (DECAY_PAGE + $2C)


;################### Instrument Banks (8) ####################################

DECAY_INSTRUMENT		= (DECAY_PAGE + $30)

DECAY_INST1_VOL_LO		= (DECAY_INSTRUMENT + $00)
DECAY_INST1_VOL_HI		= (DECAY_INSTRUMENT + $01)
DECAY_INST1_ARP_LO		= (DECAY_INSTRUMENT + $02)
DECAY_INST1_ARP_HI		= (DECAY_INSTRUMENT + $03)
DECAY_INST1_DUTY_LO		= (DECAY_INSTRUMENT + $04)
DECAY_INST1_DUTY_HI		= (DECAY_INSTRUMENT + $05)

DECAY_INST2_VOL_LO		= (DECAY_INSTRUMENT + $08)
DECAY_INST2_VOL_HI		= (DECAY_INSTRUMENT + $09)
DECAY_INST2_ARP_LO		= (DECAY_INSTRUMENT + $0A)
DECAY_INST2_ARP_HI		= (DECAY_INSTRUMENT + $0B)
DECAY_INST2_DUTY_LO		= (DECAY_INSTRUMENT + $0C)
DECAY_INST2_DUTY_HI		= (DECAY_INSTRUMENT + $0D)

DECAY_INST3_VOL_LO		= (DECAY_INSTRUMENT + $10)
DECAY_INST3_VOL_HI		= (DECAY_INSTRUMENT + $11)
DECAY_INST3_ARP_LO		= (DECAY_INSTRUMENT + $12)
DECAY_INST3_ARP_HI		= (DECAY_INSTRUMENT + $13)
DECAY_INST3_DUTY_LO		= (DECAY_INSTRUMENT + $14)
DECAY_INST3_DUTY_HI		= (DECAY_INSTRUMENT + $15)

DECAY_INST4_VOL_LO		= (DECAY_INSTRUMENT + $18)
DECAY_INST4_VOL_HI		= (DECAY_INSTRUMENT + $19)
DECAY_INST4_ARP_LO		= (DECAY_INSTRUMENT + $1A)
DECAY_INST4_ARP_HI		= (DECAY_INSTRUMENT + $1B)
DECAY_INST4_DUTY_LO		= (DECAY_INSTRUMENT + $1C)
DECAY_INST4_DUTY_HI		= (DECAY_INSTRUMENT + $1D)


;################### Pattern Banks (32) #######################################

DECAY_PATTERN 			= (DECAY_PAGE + $80)

DECAY_PATTERN1_LO		= (DECAY_PAGE + $B0)
DECAY_PATTERN1_HI		= (DECAY_PAGE + $B1)
DECAY_PATTERN2_LO		= (DECAY_PAGE + $B2)
DECAY_PATTERN2_HI		= (DECAY_PAGE + $B3)
DECAY_PATTERN3_LO		= (DECAY_PAGE + $B4)
DECAY_PATTERN3_HI		= (DECAY_PAGE + $B5)
DECAY_PATTERN4_LO		= (DECAY_PAGE + $B6)
DECAY_PATTERN4_HI		= (DECAY_PAGE + $B7)
DECAY_PATTERN5_LO		= (DECAY_PAGE + $B8)
DECAY_PATTERN5_HI		= (DECAY_PAGE + $B9)
DECAY_PATTERN6_LO		= (DECAY_PAGE + $BA)
DECAY_PATTERN6_HI		= (DECAY_PAGE + $BB)
DECAY_PATTERN7_LO		= (DECAY_PAGE + $BC)
DECAY_PATTERN7_HI		= (DECAY_PAGE + $BD)
DECAY_PATTERN8_LO		= (DECAY_PAGE + $BE)
DECAY_PATTERN8_HI		= (DECAY_PAGE + $BF)

DECAY_PATTERN9_LO		= (DECAY_PAGE + $C0)
DECAY_PATTERN9_HI		= (DECAY_PAGE + $C1)
DECAY_PATTERN10_LO		= (DECAY_PAGE + $C2)
DECAY_PATTERN10_HI		= (DECAY_PAGE + $C3)
DECAY_PATTERN11_LO		= (DECAY_PAGE + $C4)
DECAY_PATTERN11_HI		= (DECAY_PAGE + $C5)
DECAY_PATTERN12_LO		= (DECAY_PAGE + $C6)
DECAY_PATTERN12_HI		= (DECAY_PAGE + $C7)
DECAY_PATTERN13_LO		= (DECAY_PAGE + $C8)
DECAY_PATTERN13_HI		= (DECAY_PAGE + $C9)
DECAY_PATTERN14_LO		= (DECAY_PAGE + $CA)
DECAY_PATTERN14_HI		= (DECAY_PAGE + $CB)
DECAY_PATTERN15_LO		= (DECAY_PAGE + $CC)
DECAY_PATTERN15_HI		= (DECAY_PAGE + $CD)
DECAY_PATTERN16_LO		= (DECAY_PAGE + $CE)
DECAY_PATTERN16_HI		= (DECAY_PAGE + $CF)

DECAY_PATTERN17_LO		= (DECAY_PAGE + $D0)
DECAY_PATTERN17_HI		= (DECAY_PAGE + $D1)
DECAY_PATTERN18_LO		= (DECAY_PAGE + $D2)
DECAY_PATTERN18_HI		= (DECAY_PAGE + $D3)
DECAY_PATTERN19_LO		= (DECAY_PAGE + $D4)
DECAY_PATTERN19_HI		= (DECAY_PAGE + $D5)
DECAY_PATTERN20_LO		= (DECAY_PAGE + $D6)
DECAY_PATTERN20_HI		= (DECAY_PAGE + $D7)
DECAY_PATTERN21_LO		= (DECAY_PAGE + $D8)
DECAY_PATTERN21_HI		= (DECAY_PAGE + $D9)
DECAY_PATTERN22_LO		= (DECAY_PAGE + $DA)
DECAY_PATTERN22_HI		= (DECAY_PAGE + $DB)
DECAY_PATTERN23_LO		= (DECAY_PAGE + $DC)
DECAY_PATTERN23_HI		= (DECAY_PAGE + $DD)
DECAY_PATTERN24_LO		= (DECAY_PAGE + $DE)
DECAY_PATTERN24_HI		= (DECAY_PAGE + $DF)

DECAY_PATTERN25_LO		= (DECAY_PAGE + $E0)
DECAY_PATTERN25_HI		= (DECAY_PAGE + $E1)
DECAY_PATTERN26_LO		= (DECAY_PAGE + $E2)
DECAY_PATTERN26_HI		= (DECAY_PAGE + $E3)
DECAY_PATTERN27_LO		= (DECAY_PAGE + $E4)
DECAY_PATTERN27_HI		= (DECAY_PAGE + $E5)
DECAY_PATTERN28_LO		= (DECAY_PAGE + $E6)
DECAY_PATTERN28_HI		= (DECAY_PAGE + $E7)
DECAY_PATTERN29_LO		= (DECAY_PAGE + $E8)
DECAY_PATTERN29_HI		= (DECAY_PAGE + $E9)
DECAY_PATTERN30_LO		= (DECAY_PAGE + $EA)
DECAY_PATTERN30_HI		= (DECAY_PAGE + $EB)
DECAY_PATTERN31_LO		= (DECAY_PAGE + $EC)
DECAY_PATTERN31_HI		= (DECAY_PAGE + $ED)
DECAY_PATTERN32_LO		= (DECAY_PAGE + $EE)
DECAY_PATTERN32_HI		= (DECAY_PAGE + $EF)
